<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <title>Login</title>
    <meta name="keywords" content="dashboard, bootstrap 5 dashboard, bootstrap 5 design, bootstrap 5">
    <link rel="stylesheet" th:href="@{/vuexy/assets/vendor/fonts/tabler-icons.css}">
    <link rel="stylesheet" th:href="@{/vuexy/assets/vendor/css/pages/page-auth.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/vuexy/assets/vendor/css/rtl/core.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/vuexy/assets/vendor/css/rtl/theme-default.css}">

    <script th:inline="javascript">
        const contextPath = '[[@{/}]]'.replaceAll("\"", "")
    </script>
    <style>
        .alertMy {
            position: absolute;
            top: 45px;
            z-index: 1000;
            width: 40%;
            display: flex;
            justify-content: center;
            align-content: center;
        }

        .alert-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .is-invalid {
            border-color: #dc3545;
        }
    </style>
</head>

<body>
<div class="alert-wrapper">
    <div class="alert alert-danger alertMy" role="alert" th:if="${param.error}">
        Invalid username and password.
    </div>
    <div class="alert alert-info alertMy" role="alert" th:if="${param.logout}">
        You have been logged out.
    </div>
</div>
<!-- Content -->
<div class="authentication-wrapper authentication-cover">
    <div class="authentication-inner row m-0">
        <!-- Left Text -->
        <div class="d-none d-lg-flex col-lg-8 p-0">
            <div class="auth-cover-bg auth-cover-bg-color d-flex justify-content-center align-items-center">
                <img th:src="@{/vuexy/assets/img/illustrations/auth-login-illustration-light.png}"
                     alt="auth-login-cover"
                     class="my-5 auth-illustration" data-app-light-img="illustrations/auth-login-illustration-light.png"
                     data-app-dark-img="illustrations/auth-login-illustration-dark.png">

                <img th:src="@{/vuexy/assets/img/illustrations/bg-shape-image-light.png}" alt="auth-login-cover"
                     class="platform-bg" data-app-light-img="illustrations/bg-shape-image-light.png"
                     data-app-dark-img="illustrations/bg-shape-image-dark.png">
            </div>
        </div>
        <!-- /Left Text -->

        <!-- Login -->
        <div class="d-flex col-12 col-lg-4 align-items-center authentication-bg p-sm-12 p-6">
            <div class="w-px-400 mx-auto mt-12 pt-5">
                <h4 class="mb-1 text-center">Welcome to Portier Digital</h4>
                <form id="formAuthentication" class="mb-6 fv-plugins-bootstrap5 fv-plugins-framework"
                      novalidate="novalidate" th:action="@{/process_login}" method="POST">
                    <div class="mb-6 fv-plugins-icon-container fv-plugins-bootstrap5-row-valid">
                        <label for="email_" class="form-label">Email</label>
                        <input type="text" class="form-control" id="email_" name="username"
                               placeholder="Enter your email" autofocus="">
                        <div id="valid-message-email_"
                             class="fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback"></div>
                    </div>
                    <div class="mb-6 form-password-toggle fv-plugins-icon-container">
                        <label class="form-label" for="password_">Password</label>
                        <div class="input-group input-group-merge has-validation">
                            <input type="password" id="password_" class="form-control" name="password"
                                   placeholder="············" aria-describedby="password">
                            <span class="input-group-text cursor-pointer"><i id="eye2" class="ti ti-eye-off"></i></span>
                        </div>
                        <div id="valid-message-password_"
                             class="fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback">
                        </div>
                    </div>
                    <button class="btn btn-primary d-grid w-100 waves-effect waves-light">
                        Sign in
                    </button>
                    <input type="hidden"></form>
                <p class="text-center">
                    <span>First time on our site?</span>
                    <a href="javascript:void(0)" onclick="modalForRegistration()">
                        <span>Registry</span>
                    </a>
                </p>
            </div>
        </div>
        <!-- /Login -->
    </div>
</div>
<!-- / Content -->
<script th:src="@{/jquery/jquery-3.7.1.min.js}"></script>
<script th:src="@{/vuexy/assets/vendor/js/bootstrap.js}"></script>
<script th:src="@{/js/login.js}"></script>
<script>
    const eye = $('#eye2');
    let element_password = document.getElementById('password_');
    eye.on('click', function () {
        if (element_password.type === 'password') {
            element_password.type = 'text';
            eye.removeClass('ti-eye-off').addClass('ti-eye')
        } else if (element_password.type === 'text') {
            element_password.type = 'password';
            eye.removeClass('ti-eye').addClass('ti-eye-off')
        }
    });

    document.addEventListener("DOMContentLoaded", function () {
        const errorAlert = document.querySelector('.alert-danger');
        if (errorAlert) {
            document.getElementById("email_").classList.add("is-invalid");
            document.getElementById("password_").classList.add("is-invalid");
        }
    });
</script>
</body>
</html>